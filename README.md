# Khmelnytskyi Outage API

API Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ñ–Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ñƒ Ğ³Ñ€Ğ°Ñ„Ñ–ĞºÑ–Ğ² Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ½Ğ¸Ñ… Ğ²Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½ÑŒ ĞµĞ»ĞµĞºÑ‚Ñ€Ğ¾ĞµĞ½ĞµÑ€Ğ³Ñ–Ñ— Ñƒ Ğ¥Ğ¼ĞµĞ»ÑŒĞ½Ğ¸Ñ†ÑŒĞºĞ¾Ğ¼Ñƒ.

Ğ”Ğ°Ğ½Ñ– Ğ· Ğ¾Ñ„Ñ–Ñ†Ñ–Ğ¹Ğ½Ğ¾Ğ³Ğ¾ ÑĞ°Ğ¹Ñ‚Ñƒ [hoe.com.ua](https://hoe.com.ua/page/pogodinni-vidkljuchennja) (Ğ¥Ğ¼ĞµĞ»ÑŒĞ½Ğ¸Ñ†ÑŒĞºĞ¾Ğ±Ğ»ĞµĞ½ĞµÑ€Ğ³Ğ¾).

## ğŸš€ Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

```bash
# Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
pip install -r requirements.txt

# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°
python main.py
```

Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ±ÑƒĞ´Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹ Ğ·Ğ° Ğ°Ğ´Ñ€ĞµÑĞ¾Ñ: http://localhost:8000

## ğŸ“š API Endpoints

### Health Check
```
GET /status
```
ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” ÑÑ‚Ğ°Ñ‚ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸ Ñ‚Ğ° Ñ‡Ğ°Ñ Ğ¾ÑÑ‚Ğ°Ğ½Ğ½ÑŒĞ¾Ğ³Ğ¾ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ.

```json
{
  "status": "healthy",
  "last_scrape": "2026-01-15T22:11:42",
  "available_dates": ["2026-01-16", "2026-01-15"],
  "total_queues": 12
}
```

### ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…
```
GET /update
```
Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ÑƒÑ” Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ– Ğ³Ñ€Ğ°Ñ„Ñ–ĞºĞ¸ Ğ· ÑĞ°Ğ¹Ñ‚Ñƒ hoe.com.ua.

### Ğ“Ñ€Ğ°Ñ„Ñ–Ğº Ğ´Ğ»Ñ Ñ‡ĞµÑ€Ğ³Ğ¸
```
GET /schedule/{queue}
GET /schedule/{queue}/{date}
```

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¸:**
- `queue` â€” Ğ½Ğ¾Ğ¼ĞµÑ€ Ñ‡ĞµÑ€Ğ³Ğ¸ (1.1, 1.2, ... 6.2)
- `date` â€” Ğ´Ğ°Ñ‚Ğ° Ñƒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ– YYYY-MM-DD (Ğ¾Ğ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

**ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ñ–:**
```json
{
  "queue": "3.1",
  "date": "2026-01-15",
  "status": "active",
  "intervals": [
    {"start": "04:00", "end": "09:00", "type": "base"},
    {"start": "13:00", "end": "18:00", "type": "base"}
  ],
  "operational_message": "Ğ£ Ğ¿Ñ–Ğ´Ñ‡ĞµÑ€Ğ³Ğ¸ 3.1 Ğ²Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ Ñ€Ğ¾Ğ·Ğ¿Ğ¾Ñ‡Ğ½ĞµÑ‚ÑŒÑÑ Ñ€Ğ°Ğ½Ñ–ÑˆĞµ â€“ Ğ¾ 20:00",
  "last_updated": "2026-01-15T22:11:42",
  "total_hours_off": 10.0
}
```

### Ğ’ÑÑ– Ğ³Ñ€Ğ°Ñ„Ñ–ĞºĞ¸ Ğ½Ğ° Ğ´Ğ°Ñ‚Ñƒ
```
GET /all/{date}
```

### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ– Ğ´Ğ°Ñ‚Ğ¸
```
GET /dates
```

## ğŸ“– Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ

- **Swagger UI:** http://localhost:8000/docs
- **ReDoc:** http://localhost:8000/redoc

## ğŸ—‚ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ

```
khm_outage_monitor/
â”œâ”€â”€ main.py                 # FastAPI Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¾Ğº
â”œâ”€â”€ requirements.txt        # Ğ—Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
â”œâ”€â”€ outages.db             # SQLite Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…
â””â”€â”€ app/
    â”œâ”€â”€ core/
    â”‚   â””â”€â”€ models.py      # Pydantic Ğ¼Ğ¾Ğ´ĞµĞ»Ñ–
    â”œâ”€â”€ db/
    â”‚   â””â”€â”€ database.py    # Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ° Ğ· Ğ±Ğ°Ğ·Ğ¾Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…
    â”œâ”€â”€ logic/
    â”‚   â”œâ”€â”€ scraper.py     # ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ÑĞ°Ğ¹Ñ‚Ñƒ hoe.com.ua
    â”‚   â””â”€â”€ parser.py      # ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° Ñ‚ĞµĞºÑÑ‚Ñƒ Ğ³Ñ€Ğ°Ñ„Ñ–ĞºÑ–Ğ²
    â”œâ”€â”€ services/
    â”‚   â””â”€â”€ outage_service.py  # Ğ‘Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºĞ°
    â””â”€â”€ static/
        â””â”€â”€ index.html     # Ğ’ĞµĞ±-Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
```

## ğŸ—„ï¸ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…

SQLite Ğ· Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑĞ¼Ğ¸:

| Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ | ĞĞ¿Ğ¸Ñ |
|---------|------|
| `queues` | Ğ§ĞµÑ€Ğ³Ğ¸ (1.1 â€” 6.2) |
| `schedules` | Ğ†Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ğ¸ Ğ²Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½ÑŒ |
| `daily_messages` | ĞĞ¿ĞµÑ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ– Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ |
| `metadata` | Ğ§Ğ°Ñ Ğ¾ÑÑ‚Ğ°Ğ½Ğ½ÑŒĞ¾Ğ³Ğ¾ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ |

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ—

- **Python 3.10+**
- **FastAPI** â€” Ğ²ĞµĞ±-Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº
- **SQLite** â€” Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…
- **BeautifulSoup4** â€” Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ HTML
- **Requests** â€” HTTP-Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ğ¸
- **Uvicorn** â€” ASGI ÑĞµÑ€Ğ²ĞµÑ€

## ğŸ“± Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ

API ÑĞ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ´Ğ»Ñ Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ— Ğ· Ğ¼Ğ¾Ğ±Ñ–Ğ»ÑŒĞ½Ğ¸Ğ¼Ğ¸ Ğ·Ğ°ÑÑ‚Ğ¾ÑÑƒĞ½ĞºĞ°Ğ¼Ğ¸ (Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´, Â«Ğ¡Ğ’Ğ†Ğ¢Ğ›ĞÂ»).

**CORS** Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ· Ğ±ÑƒĞ´ÑŒ-ÑĞºĞ¸Ñ… Ğ´Ğ¾Ğ¼ĞµĞ½Ñ–Ğ².

### ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñƒ (JavaScript)
```javascript
const response = await fetch('http://localhost:8000/schedule/3.1/2026-01-15');
const data = await response.json();

console.log(`Ğ§ĞµÑ€Ğ³Ğ° ${data.queue}: ${data.total_hours_off} Ğ³Ğ¾Ğ´. Ğ±ĞµĞ· ÑĞ²Ñ–Ñ‚Ğ»Ğ°`);
data.intervals.forEach(i => console.log(`  ${i.start} - ${i.end}`));
```

## ğŸ“ Ğ›Ñ–Ñ†ĞµĞ½Ğ·Ñ–Ñ

MIT
